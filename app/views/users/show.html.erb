<% title "Show User Details " %>

<h1>User Details</h1>

<p>
  <span class="label">Name: </span>
  <span class="value"><%=h "#{@user.last_name}, #{@user.first_name}" %></span>
</p>
<p>
  <span class="label">Email: </span>
  <span class="value"><%=h @user.email %></span>
</p>

<p>
  <span class="label">Batch: </span>
  <span class="value"><%=h @user.batch_display  %></span>
</p>

<h2>Positions Held</h2>

<table>
  <tr>
    <th>Committee</th>
    <th>Role</th>
    <th>Year</th>
  </tr>
  
  <% @positions.each do |position| %>
    <tr>
      <td><%=h position.committee.code %></td>
      <td><%=h position.role.name %></td>
      <td><%=h position.year %></td>
      <td><%= link_to 'Edit', edit_user_position_path(@user, position) %></td>
      <td><%= link_to 'Destroy', user_position_path(@user, position), :confirm => 'Are you sure?', :method => :delete %></td>

    </tr>
  <% end %>
  
</table>

<br />

<%= link_to 'New position', new_user_position_path(@user) %>

<br />

<% if current_user.admin? %>
  <%= link_to "Edit", edit_user_path(@user) %>
  <%= link_to "Delete", user_path(@user), :method => :delete %>
<% end %>
<%= link_to "Back to List", users_path %>
  
